<template>
  <v-card
    class="process-card text-center pa-3"
    :class="{ 
      'bottleneck-shadow': isBottleneck, 
      'selected-border': isSelected 
    }"
    :color="color + '-lighten-5'"
    elevation="2"
    @click="emit('card-click', title)" hover
  >
    <v-badge
      v-if="isBottleneck"
      content="!"
      color="red-darken-3"
      offset-x="10"
      offset-y="10"
    >
      <v-card-title class="text-subtitle-1 font-weight-bold pa-1">{{
        title
      }}</v-card-title>
    </v-badge>
    <v-card-title v-else class="text-subtitle-1 font-weight-bold pa-1">{{
      title
    }}</v-card-title>

    <v-divider class="my-1"></v-divider>

    <div :class="['text-h5', 'font-weight-medium', `text-success`]">
      {{ pass }}
    </div>
    <div class="text-caption text-medium-emphasis text-error">Fail: {{ fail }}</div>
  </v-card>
</template>

<script setup>
import { defineProps, defineEmits } from 'vue';

const props = defineProps({
    title: String,
    pass: String,
    fail: String,
    color: String,
    isBottleneck: {
        type: Boolean,
        default: false,
    },
    // ğŸ¯ PROP Má»šI
    isSelected: {
        type: Boolean,
        default: false,
    },
});

// ğŸ’¡ Sá»­a láº¡i: chá»‰ cáº§n emit 'card-click' vÃ  'toggle-bottleneck'
const emit = defineEmits(['card-click', 'toggle-bottleneck']); 

// HÃ m openDetails khÃ´ng cáº§n thiáº¿t ná»¯a vÃ¬ ta dÃ¹ng @click trá»±c tiáº¿p trÃªn template
</script>

<style scoped>
/* CSS cho pháº§n Tá»‘i Æ°u hÃ³a thá»‹ giÃ¡c */
.process-card {
  min-width: 150px;
  max-width: 180px;
  cursor: pointer;
  border-radius: 8px !important;
}

.flow-arrow {
  font-size: 2rem;
  font-weight: 300;
  color: #3f51b5; 
}

/* Äá»• bÃ³ng cáº£nh bÃ¡o cho Bottleneck (viá»n Ä‘á») */
.bottleneck-shadow {
  box-shadow: 0 0 15px rgba(255, 0, 0, 0.6) !important;
  border: 2px solid #ef5350 !important; /* Viá»n Ä‘á» */
}

/* ğŸ¯ CSS Má»šI: Viá»n cho tráº¡ng thÃ¡i Ä‘Ã£ chá»n (viá»n xanh) */
.selected-border {
  border: 2px solid #2196F3 !important; 
  box-shadow: 0 0 10px rgba(33, 150, 243, 0.6) !important;
}
</style>