import{a as u,V as m,b as p,c as g,d as f,e as V,f as l,g as h}from"./VToolbar-Dys_kvDk.js";import{c as w,w as o,o as n,a as t,V as d,b as i,d as c,e as k,t as y,f as U}from"./index-DGSZfBGt.js";const b={key:0,class:"text-red"},T={data(){return{Url:"http://192.168.100.79:3000",Username:"",Password:"",error:"",DialogFailed:!0}},methods:{async login(){try{const s=await u.post(`${this.Url}/Users/login`,{Username:this.Username,Password:this.Password});localStorage.setItem("token",s.data.token),this.$router.push("/Home")}catch(s){this.error=s.response.data.error}}}},C=Object.assign(T,{__name:"Page-Login",setup(s){return u.interceptors.response.use(e=>e,e=>(e.response&&e.response.status===401&&(console.warn("Token hết hạn hoặc không hợp lệ, tự động đăng xuất..."),localStorage.removeItem("token"),window.location.href="/"),Promise.reject(e))),(e,a)=>(n(),w(m,{width:"100%"},{default:o(()=>[t(p,{class:"mx-auto my-auto",color:"grey-lighten-4",width:"400"},{default:o(()=>[t(g,{color:"primary",flat:""},{default:o(()=>[t(d,{icon:"mdi-account"}),t(f,{class:"font-weight-light"},{default:o(()=>a[3]||(a[3]=[i("Đăng nhập ")])),_:1})]),_:1}),t(V,null,{default:o(()=>[t(l,{variant:"solo-filled",label:"Tên đăng nhập",modelValue:e.Username,"onUpdate:modelValue":a[0]||(a[0]=r=>e.Username=r)},null,8,["modelValue"]),t(l,{variant:"solo-filled",type:"password",label:"Mật khẩu",modelValue:e.Password,"onUpdate:modelValue":a[1]||(a[1]=r=>e.Password=r)},null,8,["modelValue"]),e.error!=""?(n(),c("p",b,y(e.error),1)):k("",!0)]),_:1}),t(U),t(h,null,{default:o(()=>[t(d,{onClick:a[2]||(a[2]=r=>e.login()),block:"",variant:"tonal",color:"primary"},{default:o(()=>a[4]||(a[4]=[i(" Đăng nhập ")])),_:1})]),_:1})]),_:1})]),_:1}))}});export{C as default};
