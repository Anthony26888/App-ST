{
  "version": 3,
  "sources": ["../../vuetify/src/composables/fileDrop.ts", "../../vuetify/src/composables/fileFilter.ts"],
  "sourcesContent": ["// Types\ntype FileSelection = { file: File, path: string }\n\nexport function useFileDrop () {\n  function hasFilesOrFolders (e: DragEvent): boolean {\n    const entries = [...e.dataTransfer?.items ?? []]\n      .filter(x => x.kind === 'file')\n      .map(x => x.webkitGetAsEntry())\n      .filter(Boolean)\n\n    return entries.length > 0 || [...e.dataTransfer?.files ?? []].length > 0\n  }\n\n  async function handleDrop (e: DragEvent) {\n    const result: File[] = []\n\n    const entries = [...e.dataTransfer?.items ?? []]\n      .filter(x => x.kind === 'file')\n      .map(x => x.webkitGetAsEntry())\n      .filter(Boolean)\n\n    if (entries.length) {\n      for (const entry of entries) {\n        const files = await traverseFileTree(entry!, appendIfDirectory('.', entry!))\n        result.push(...files.map(x => x.file))\n      }\n    } else {\n      result.push(...[...e.dataTransfer?.files ?? []])\n    }\n\n    return result\n  }\n\n  return {\n    handleDrop,\n    hasFilesOrFolders,\n  }\n}\n\nfunction traverseFileTree (item: FileSystemEntry, path = ''): Promise<FileSelection[]> {\n  return new Promise<FileSelection[]>((resolve, reject) => {\n    if (item.isFile) {\n      const fileEntry = item as FileSystemFileEntry\n      fileEntry.file((file: File) => resolve([{ file, path }]), reject)\n    } else if (item.isDirectory) {\n      const directoryReader = (item as FileSystemDirectoryEntry).createReader()\n      directoryReader.readEntries(async entries => {\n        const files = [] as FileSelection[]\n        for (const entry of entries) {\n          files.push(...(await traverseFileTree(entry, appendIfDirectory(path, entry))))\n        }\n        resolve(files)\n      })\n    }\n  })\n}\n\nfunction appendIfDirectory (path: string, item: FileSystemEntry) {\n  return item.isDirectory\n    ? `${path}/${item.name}`\n    : path\n}\n", "// Utilities\nimport { computed } from 'vue'\nimport { propsFactory } from '@/util'\n\nexport interface FileFilterProps {\n  filterByType?: string\n}\n\nexport type FileFilterResult = {\n  accepted: File[]\n  rejected: File[]\n}\n\n// Composables\nexport const makeFileFilterProps = propsFactory({\n  filterByType: String,\n}, 'file-accept')\n\nexport function useFileFilter (props: FileFilterProps) {\n  const fileFilter = computed(() => props.filterByType ? createFilter(props.filterByType) : null)\n\n  function filterAccepted (files: File[]): FileFilterResult {\n    if (fileFilter.value) {\n      const accepted = files.filter(fileFilter.value)\n      return {\n        accepted,\n        rejected: files.filter(f => !accepted.includes(f)),\n      }\n    }\n    return {\n      accepted: files,\n      rejected: [],\n    }\n  }\n\n  return {\n    filterAccepted,\n  }\n}\n\nfunction createFilter (v: string): ((v: File) => boolean) {\n  const types = v.split(',').map(x => x.trim().toLowerCase())\n  const extensionsToMatch = types.filter(x => x.startsWith('.'))\n  const wildcards = types.filter(x => x.endsWith('/*'))\n  const typesToMatch = types.filter(x => !extensionsToMatch.includes(x) && !wildcards.includes(x))\n\n  return (file: File): boolean => {\n    const extension = file.name.split('.').at(-1)?.toLowerCase() ?? ''\n    const typeGroup = file.type.split('/').at(0)?.toLowerCase() ?? ''\n    return typesToMatch.includes(file.type) ||\n      extensionsToMatch.includes(`.${extension}`) ||\n      wildcards.includes(`${typeGroup}/*`)\n  }\n}\n"],
  "mappings": "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",
  "names": ["useFileDrop", "hasFilesOrFolders", "e", "entries", "dataTransfer", "items", "filter", "x", "kind", "map", "webkitGetAsEntry", "Boolean", "length", "files", "handleDrop", "result", "entry", "traverseFileTree", "appendIfDirectory", "push", "file", "item", "path", "arguments", "undefined", "Promise", "resolve", "reject", "isFile", "fileEntry", "isDirectory", "directoryReader", "createReader", "readEntries", "name", "makeFileFilterProps", "propsFactory", "filterByType", "String", "useFileFilter", "props", "fileFilter", "computed", "createFilter", "filterAccepted", "files", "value", "accepted", "filter", "rejected", "f", "includes", "v", "types", "split", "map", "x", "trim", "toLowerCase", "extensionsToMatch", "startsWith", "wildcards", "endsWith", "typesToMatch", "file", "extension", "name", "at", "typeGroup", "type"]
}
